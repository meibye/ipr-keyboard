# Common settings for both RPis - IPR Keyboard Project
# Copy this file to /opt/ipr_common.env on each device and edit device-specific values
#
# Usage:
#   sudo cp provision/common.env.example provision/common.env
#   nano provision/common.env  # Edit device-specific values
#   sudo cp provision/common.env /opt/ipr_common.env
#
# IMPORTANT:
#   Do NOT put inline comments on the same line as a value.
#   Example of BAD line (systemd may treat comment as part of value):
#     BT_DEVICE_NAME="IPR Keyboard (Dev)"  # comment
#   Put comments on their own lines instead.

# ============================================
# Repository Configuration
# ============================================
REPO_URL="https://github.com/meibye/ipr-keyboard.git"
REPO_DIR="/home/meibye/dev/ipr-keyboard"
APP_USER="meibye"
APP_GROUP="meibye"

# ============================================
# Git Identity (used for commits/pushes)
# ============================================
GIT_USER_NAME="Michael Eibye"
GIT_USER_EMAIL="michael@eibye.name"

# Pin to specific branch/tag for reproducibility
# Use "main" for latest, or a tag like "v1.0.0"
GIT_REF="main"

# ============================================
# Device-Specific Configuration
# ============================================
# IMPORTANT: Edit these values per device

# Device type: "dev" or "target"
# Change to "target" for RPi Zero 2 W
DEVICE_TYPE="dev"

# Hostname (set during provisioning)
# RPi 4: ipr-dev-pi4
# RPi Zero: ipr-target-zero2
HOSTNAME="ipr-dev-pi4"

# Bluetooth device name
# This is the name shown in BLE advertising (and also used for PRETTY_HOSTNAME)
# RPi 4: "IPR Keyboard (Dev)"
# RPi Zero: "IPR Keyboard"
BT_DEVICE_NAME="IPR Keyboard (Dev)"

# ============================================
# Application Configuration
# ============================================
APP_VENV_DIR="/home/meibye/dev/ipr-keyboard/.venv"
APP_ENTRY="src/ipr_keyboard/main.py"
SERVICE_NAME="ipr_keyboard"

# ============================================
# Bluetooth Configuration
# ============================================
BT_HCI="hci0"
# Backend: "ble" or "uinput" (BLE HID over GATT recommended)
BT_BACKEND="ble"

# Pairing UX:
# Default (recommended): BLE-only. Prevents Windows from showing two devices.
# - 0: do NOT force classic discoverable (BR/EDR inquiry scan)
# - 1: enable classic discoverable (only if you intentionally use classic/uinput backend)
BT_ENABLE_CLASSIC_DISCOVERABLE="0"

# Controller mode in /etc/bluetooth/main.conf:
# - le   : BLE-only (recommended for BLE HID over GATT)
# - dual : BLE + BR/EDR (use only if you need classic/uinput backend)
BT_CONTROLLER_MODE="le"

# ============================================
# Network Configuration (for headless provisioning)
# ============================================
# Hotspot SSID prefix (actual SSID will be prefix-XXXX)
AP_SSID_PREFIX="ipr-setup"

# USB OTG static IP for Pi Zero 2 W
USB_OTG_IP="192.168.7.1/24"
